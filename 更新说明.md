# 🎮 移动端虚拟摇杆更新

## ✨ 新增功能

已为游戏添加**移动端虚拟摇杆**支持！

### 功能特性：
- ✅ **自动检测**：自动识别移动设备（手机/平板）
- ✅ **8方向控制**：支持上、下、左、右、左上、右上、左下、右下 8个方向
- ✅ **半透明设计**：不遮挡游戏画面
- ✅ **左下角位置**：方便拇指操作
- ✅ **方向指示器**：实时显示当前操作方向
- ✅ **触摸反馈**：摇杆跟随手指移动

## 📱 使用方法

### 移动端玩家：
1. 用手机浏览器访问游戏
2. 左下角会自动显示虚拟摇杆
3. 用拇指拖动摇杆控制车辆移动
4. 松开手指车辆停止

### PC端玩家：
- 继续使用键盘 WASD 或方向键
- 不会显示虚拟摇杆

## 🔄 如何更新到服务器

### 方式1：只更新 index.html（推荐，最快）

```bash
# 在本地执行
scp /Users/admin/unity_project/car/deployment/Builds/WebGL/index.html root@你的服务器IP:/opt/car-game/deployment/Builds/WebGL/
```

**无需重启服务器**，刷新浏览器即可看到效果！

### 方式2：重新上传整个部署包

```bash
# 在本地执行
scp -r /Users/admin/unity_project/car/deployment root@你的服务器IP:/opt/car-game/
```

## ✅ 验证更新

### 在手机上测试：
1. 用手机浏览器访问：`http://你的服务器IP:8899`
2. 检查左下角是否显示虚拟摇杆
3. 尝试拖动摇杆，车辆应该能移动

### 在PC上测试：
1. 用电脑浏览器访问：`http://你的服务器IP:8899`
2. 确认没有显示虚拟摇杆
3. 键盘控制应该正常工作

## 🎨 虚拟摇杆外观

- **底座**：半透明白色圆形，直径 150px
- **摇杆**：半透明白色圆形，直径 60px
- **方向指示器**：8个小圆点，激活时高亮显示
- **透明度**：30%-60%，不遮挡游戏画面
- **位置**：左下角，距离边缘 20px

## 🔧 技术细节

- 自动检测 User-Agent 判断是否为移动设备
- 使用触摸事件（touchstart, touchmove, touchend）
- 模拟键盘事件发送给 Unity WebGL
- 支持 8 方向精确控制
- 包含死区设置，避免误触

## 📝 注意事项

1. **浏览器兼容性**：
   - iOS Safari ✅
   - Android Chrome ✅
   - 其他现代移动浏览器 ✅

2. **性能**：
   - 虚拟摇杆不影响游戏性能
   - 触摸事件响应流畅

3. **多点触控**：
   - 目前只支持单点触控（摇杆）
   - 未来可扩展支持多点触控（如加速按钮）

## 🎉 更新完成！

现在手机用户也可以愉快地玩游戏了！

---

**更新时间**：2025-11-28
**版本**：v1.1.0 - 移动端支持
