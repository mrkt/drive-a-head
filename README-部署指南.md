# ğŸš€ ç”Ÿäº§éƒ¨ç½²æŒ‡å— - v1.2.0

## ğŸ“¦ Deployment ç›®å½•è¯´æ˜

è¿™ä¸ªç›®å½•åŒ…å«äº†æ‰€æœ‰ç”Ÿäº§éƒ¨ç½²éœ€è¦çš„æ–‡ä»¶ï¼Œå·²ç»è¿‡æ¸…ç†å’Œä¼˜åŒ–ã€‚

---

## ğŸ“ ç›®å½•ç»“æ„

```
deployment/
â”œâ”€â”€ Builds/
â”‚   â””â”€â”€ WebGL/                    # WebGL å®¢æˆ·ç«¯æ„å»º
â”‚       â”œâ”€â”€ Build/                # Unity æ„å»ºæ–‡ä»¶
â”‚       â”‚   â”œâ”€â”€ WebGL.data.gz
â”‚       â”‚   â”œâ”€â”€ WebGL.framework.js.gz
â”‚       â”‚   â”œâ”€â”€ WebGL.loader.js
â”‚       â”‚   â””â”€â”€ WebGL.wasm.gz
â”‚       â”œâ”€â”€ TemplateData/         # Unity æ¨¡æ¿èµ„æº
â”‚       â”œâ”€â”€ index.html            # ä¸»é¡µé¢ï¼ˆåŒ…å«è™šæ‹Ÿæ‘‡æ†ï¼‰
â”‚       â”œâ”€â”€ virtual-joystick.js   # è™šæ‹Ÿæ‘‡æ†è„šæœ¬
â”‚       â””â”€â”€ virtual-joystick.css  # è™šæ‹Ÿæ‘‡æ†æ ·å¼
â”‚
â”œâ”€â”€ server/                       # Go æœåŠ¡ç«¯
â”‚   â”œâ”€â”€ server-linux              # Linux x86_64 å¯æ‰§è¡Œæ–‡ä»¶ â­
â”‚   â”œâ”€â”€ start.sh                  # å¯åŠ¨è„šæœ¬
â”‚   â”œâ”€â”€ stop.sh                   # åœæ­¢è„šæœ¬
â”‚   â””â”€â”€ run.sh                    # è¿è¡Œè„šæœ¬
â”‚
â”œâ”€â”€ README-éƒ¨ç½²æŒ‡å—.md            # æœ¬æ–‡ä»¶
â”œâ”€â”€ v1.2.0-æ›´æ–°è¯´æ˜.md            # æœ€æ–°ç‰ˆæœ¬æ›´æ–°è¯´æ˜
â”œâ”€â”€ è™šæ‹Ÿæ‘‡æ†è¯´æ˜.md               # è™šæ‹Ÿæ‘‡æ†åŠŸèƒ½è¯´æ˜
â””â”€â”€ ä¸Šä¼ åˆ°æœåŠ¡å™¨.sh               # ä¸Šä¼ è„šæœ¬

```

---

## âš ï¸ é‡è¦æç¤º

### å½“å‰çŠ¶æ€
- âœ… **æœåŠ¡ç«¯**ï¼šå·²æ›´æ–°åˆ°æœ€æ–°ç‰ˆæœ¬ï¼ˆv1.2.0ï¼ŒåŒ…å«æ‰€æœ‰ä¿®å¤ï¼‰
- âŒ **WebGL å®¢æˆ·ç«¯**ï¼šéœ€è¦é‡æ–°æ„å»ºï¼ˆå½“å‰æ˜¯æ—§ç‰ˆæœ¬ï¼‰

### åœ¨éƒ¨ç½²å‰å¿…é¡»åšçš„äº‹æƒ…

**å¿…é¡»å…ˆé‡æ–°æ„å»º WebGLï¼** å½“å‰çš„ WebGL æ„å»ºä¸åŒ…å«ä»Šæ™šçš„é‡è¦ä¿®å¤ã€‚

#### æ­¥éª¤ï¼š
1. åœ¨ Unity ç¼–è¾‘å™¨ä¸­é€‰æ‹© **MobileJoystick** æ¨¡æ¿
   - File > Build Settings > Player Settings
   - Resolution and Presentation > WebGL Template > **MobileJoystick**

2. é‡æ–°æ„å»º WebGL
   - File > Build Settings > Build
   - è¾“å‡ºåˆ°ï¼š`/Users/admin/unity_project/car/Builds/WebGL`

3. å¤åˆ¶æ–°æ„å»ºåˆ° deployment
   ```bash
   cp -r /Users/admin/unity_project/car/Builds/WebGL/* /Users/admin/unity_project/car/deployment/Builds/WebGL/
   ```

---

## ğŸš€ éƒ¨ç½²åˆ° Linux æœåŠ¡å™¨

### æœåŠ¡å™¨è¦æ±‚
- **æ“ä½œç³»ç»Ÿ**ï¼šLinux x86_64
- **ç«¯å£**ï¼š8899ï¼ˆWebSocketï¼‰ã€9988ï¼ˆHTTPï¼Œå¯é€‰ï¼‰
- **ä¾èµ–**ï¼šæ— ï¼ˆGo ç¨‹åºå·²é™æ€ç¼–è¯‘ï¼‰

### æ–¹å¼ 1ï¼šä½¿ç”¨ä¸Šä¼ è„šæœ¬ï¼ˆæ¨èï¼‰

```bash
# ç¼–è¾‘è„šæœ¬ï¼Œè®¾ç½®ä½ çš„æœåŠ¡å™¨ IP
nano ä¸Šä¼ åˆ°æœåŠ¡å™¨.sh

# è¿è¡Œä¸Šä¼ è„šæœ¬
./ä¸Šä¼ åˆ°æœåŠ¡å™¨.sh
```

### æ–¹å¼ 2ï¼šæ‰‹åŠ¨ä¸Šä¼ 

```bash
# ä¸Šä¼ æ•´ä¸ª deployment ç›®å½•
scp -r /Users/admin/unity_project/car/deployment root@ä½ çš„æœåŠ¡å™¨IP:/opt/car-game/
```

---

## ğŸ”§ åœ¨æœåŠ¡å™¨ä¸Šéƒ¨ç½²

### 1. SSH ç™»å½•åˆ°æœåŠ¡å™¨
```bash
ssh root@ä½ çš„æœåŠ¡å™¨IP
```

### 2. è¿›å…¥éƒ¨ç½²ç›®å½•
```bash
cd /opt/car-game/deployment
```

### 3. è®¾ç½®æƒé™
```bash
chmod +x server/server-linux
chmod +x server/*.sh
```

### 4. å¯åŠ¨æœåŠ¡å™¨

#### æ–¹å¼ Aï¼šä½¿ç”¨ start.shï¼ˆæ¨èï¼‰
```bash
cd server
./start.sh
```

#### æ–¹å¼ Bï¼šæ‰‹åŠ¨å¯åŠ¨
```bash
cd server
nohup ./server-linux > server.log 2>&1 &
```

### 5. éªŒè¯æœåŠ¡å™¨è¿è¡Œ
```bash
# æ£€æŸ¥è¿›ç¨‹
ps aux | grep server-linux | grep -v grep

# æŸ¥çœ‹æ—¥å¿—
tail -f server/server.log
```

### 6. åœæ­¢æœåŠ¡å™¨
```bash
cd server
./stop.sh
```

---

## ğŸŒ é…ç½® Web æœåŠ¡å™¨ï¼ˆNginxï¼‰

### ç¤ºä¾‹é…ç½®

```nginx
server {
    listen 80;
    server_name your-domain.com;

    # WebGL å®¢æˆ·ç«¯
    location / {
        root /opt/car-game/deployment/Builds/WebGL;
        index index.html;
        try_files $uri $uri/ /index.html;
    }

    # WebSocket ä»£ç†
    location /ws {
        proxy_pass http://localhost:8899;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection "upgrade";
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }
}
```

---

## âœ… éªŒè¯éƒ¨ç½²

### 1. æ£€æŸ¥æœåŠ¡å™¨çŠ¶æ€
```bash
# æœåŠ¡å™¨åº”è¯¥åœ¨è¿è¡Œ
ps aux | grep server-linux

# æ—¥å¿—åº”è¯¥æ˜¾ç¤ºå¯åŠ¨ä¿¡æ¯
tail -20 server/server.log
```

åº”è¯¥çœ‹åˆ°ç±»ä¼¼çš„æ—¥å¿—ï¼š
```
Server starting on :8899
WebSocket endpoint: ws://localhost:8899/ws
Game URL: http://localhost:9988
```

### 2. æµ‹è¯•æ¸¸æˆ

#### PC ç«¯æµ‹è¯•
1. è®¿é—®ï¼š`http://ä½ çš„æœåŠ¡å™¨IP:9988` æˆ–ä½ çš„åŸŸå
2. åº”è¯¥èƒ½çœ‹åˆ°æ¸¸æˆåŠ è½½
3. ä¸åº”è¯¥æ˜¾ç¤ºè™šæ‹Ÿæ‘‡æ†
4. é”®ç›˜ WASD æˆ–æ–¹å‘é”®åº”è¯¥èƒ½æ§åˆ¶è½¦è¾†

#### ç§»åŠ¨ç«¯æµ‹è¯•
1. ç”¨æ‰‹æœºæµè§ˆå™¨è®¿é—®æ¸¸æˆ
2. åº”è¯¥è‡ªåŠ¨æ˜¾ç¤ºè™šæ‹Ÿæ‘‡æ†ï¼ˆå·¦ä¸‹è§’ï¼‰
3. æ‘‡æ†åº”è¯¥èƒ½æ§åˆ¶è½¦è¾†ç§»åŠ¨

#### å¤šäººæµ‹è¯•
1. æ‰“å¼€ä¸¤ä¸ªæµè§ˆå™¨çª—å£
2. ä¸¤ä¸ªç©å®¶åº”è¯¥èƒ½çœ‹åˆ°å½¼æ­¤
3. ä½ç½®åº”è¯¥å®æ—¶æ›´æ–°
4. åˆ·æ–°å…¶ä¸­ä¸€ä¸ªçª—å£ï¼Œä¸åº”è¯¥å‡ºç°åƒµå°¸è½¦è¾†

---

## ğŸ“ v1.2.0 æ›´æ–°å†…å®¹

### ä¿®å¤çš„é—®é¢˜
1. âœ… **åƒµå°¸è½¦è¾†æ¸…ç†** - ç©å®¶åˆ·æ–°åä¸ä¼šç•™ä¸‹æ—§è½¦è¾†
2. âœ… **ä½ç½®å®æ—¶æ›´æ–°** - ç©å®¶å¯ä»¥çœ‹åˆ°å½¼æ­¤ç§»åŠ¨
3. âœ… **è™šæ‹Ÿæ‘‡æ†é›†æˆ** - æ¯æ¬¡æ„å»ºè‡ªåŠ¨åŒ…å«

### æ–°å¢åŠŸèƒ½
- âœ… ç§»åŠ¨ç«¯è™šæ‹Ÿæ‘‡æ†æ”¯æŒ
- âœ… è‡ªåŠ¨æ£€æµ‹ç§»åŠ¨è®¾å¤‡
- âœ… 8æ–¹å‘ç²¾ç¡®æ§åˆ¶

è¯¦ç»†æ›´æ–°è¯´æ˜è¯·æŸ¥çœ‹ï¼š`v1.2.0-æ›´æ–°è¯´æ˜.md`

---

## ğŸ” æ•…éšœæ’æŸ¥

### é—®é¢˜ 1ï¼šæœåŠ¡å™¨æ— æ³•å¯åŠ¨
```bash
# æ£€æŸ¥ç«¯å£æ˜¯å¦è¢«å ç”¨
netstat -tlnp | grep 8899

# å¦‚æœè¢«å ç”¨ï¼Œåœæ­¢æ—§è¿›ç¨‹
pkill -f server-linux

# é‡æ–°å¯åŠ¨
cd server && ./start.sh
```

### é—®é¢˜ 2ï¼šå®¢æˆ·ç«¯æ— æ³•è¿æ¥
```bash
# æ£€æŸ¥é˜²ç«å¢™
firewall-cmd --list-ports

# å¼€æ”¾ç«¯å£ï¼ˆå¦‚æœéœ€è¦ï¼‰
firewall-cmd --permanent --add-port=8899/tcp
firewall-cmd --permanent --add-port=9988/tcp
firewall-cmd --reload
```

### é—®é¢˜ 3ï¼šè™šæ‹Ÿæ‘‡æ†ä¸æ˜¾ç¤º
- ç¡®ä¿ä½¿ç”¨çš„æ˜¯æœ€æ–°æ„å»ºçš„ WebGL
- ç¡®ä¿ä½¿ç”¨äº† MobileJoystick æ¨¡æ¿
- åœ¨æ‰‹æœºæµè§ˆå™¨ä¸­æµ‹è¯•ï¼ˆPC ç«¯ä¸ä¼šæ˜¾ç¤ºï¼‰

---

## ğŸ“ æŠ€æœ¯æ”¯æŒ

### æŸ¥çœ‹æ—¥å¿—
```bash
# æœåŠ¡å™¨æ—¥å¿—
tail -f /opt/car-game/deployment/server/server.log

# æœç´¢é”™è¯¯
grep -i error /opt/car-game/deployment/server/server.log
```

### é‡å¯æœåŠ¡
```bash
cd /opt/car-game/deployment/server
./stop.sh
./start.sh
```

---

## ğŸ“Œ é‡è¦æ–‡ä»¶è¯´æ˜

### server-linux
- **ç”¨é€”**ï¼šLinux x86_64 æœåŠ¡ç«¯å¯æ‰§è¡Œæ–‡ä»¶
- **ç‰ˆæœ¬**ï¼šv1.2.0ï¼ˆ2025-11-28 21:20ï¼‰
- **å¤§å°**ï¼šçº¦ 7.0 MB
- **åŒ…å«**ï¼šæ‰€æœ‰æœ€æ–°ä¿®å¤

### index.html
- **ç”¨é€”**ï¼šæ¸¸æˆä¸»é¡µé¢
- **ç‰¹æ€§**ï¼šé›†æˆè™šæ‹Ÿæ‘‡æ†ï¼Œè‡ªåŠ¨æ£€æµ‹ç§»åŠ¨è®¾å¤‡
- **æ³¨æ„**ï¼šå¿…é¡»ä½¿ç”¨ MobileJoystick æ¨¡æ¿æ„å»º

### virtual-joystick.js/css
- **ç”¨é€”**ï¼šè™šæ‹Ÿæ‘‡æ†åŠŸèƒ½
- **ç‰¹æ€§**ï¼š8æ–¹å‘æ§åˆ¶ï¼Œè§¦æ‘¸åé¦ˆ
- **å…¼å®¹**ï¼šiOS Safariã€Android Chrome

---

## ğŸ¯ éƒ¨ç½²æ£€æŸ¥æ¸…å•

éƒ¨ç½²å‰è¯·ç¡®è®¤ï¼š

- [ ] å·²é‡æ–°æ„å»º WebGLï¼ˆä½¿ç”¨ MobileJoystick æ¨¡æ¿ï¼‰
- [ ] å·²å¤åˆ¶æœ€æ–°æ„å»ºåˆ° deployment/Builds/WebGL/
- [ ] server-linux æ–‡ä»¶å­˜åœ¨ä¸”æœ‰æ‰§è¡Œæƒé™
- [ ] å·²ä¸Šä¼ åˆ°æœåŠ¡å™¨
- [ ] æœåŠ¡å™¨ç«¯å£ 8899 å’Œ 9988 å·²å¼€æ”¾
- [ ] æœåŠ¡å™¨å·²å¯åŠ¨å¹¶è¿è¡Œæ­£å¸¸
- [ ] PC ç«¯æµ‹è¯•é€šè¿‡
- [ ] ç§»åŠ¨ç«¯æµ‹è¯•é€šè¿‡ï¼ˆè™šæ‹Ÿæ‘‡æ†æ˜¾ç¤ºï¼‰
- [ ] å¤šäººæ¸¸æˆæµ‹è¯•é€šè¿‡

---

**ç‰ˆæœ¬**ï¼šv1.2.0
**æ›´æ–°æ—¶é—´**ï¼š2025-11-28 21:20
**æœåŠ¡å™¨å¹³å°**ï¼šLinux x86_64
**çŠ¶æ€**ï¼šç­‰å¾… WebGL é‡æ–°æ„å»ºåå³å¯éƒ¨ç½²
